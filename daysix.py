input = """......#.......#...................................................................................##......#..............#........
........................#....................................#....................................................................
...#.........#...#.....##..#...#......#..........................................#................#...................#....#....#.
....................#...#...#.#............#..................................#..............#....#...............................
.....................................................................#................................#...........................
........#............#......#................#..................#................................................#...............#
...................#.........#............................................................##......................................
.........#..........#......##.............#.#...............#................................##.................#.................
...........................................................#...............................#..................##......##.....#....
...................#...........................................##...............#.....#......#............#..........#............
...............#........................#...#....#..............................................#.#......#............#...........
........#.............#...........................#..#.....................................#......................................
......#......#....#..............#...............#...#...............#.......#...................................................#
..........#............#..#.....#......................#.........#...........................#..........#.........................
#...............................................................................#.#....#.............###..................#.......
.....#.#....#....................................#............................#...............#........................#....#.....
....#......#................#....................#...................#............#................#..............................
#...................#.............................#.#...#.............#......................#.....................#..............
.................#...............#................................#..##..#..............#.......#.................................
.....................................................##.#.....................................#.............#.....................
...#.............................#................................................................................................
#.##.........................................#....#..#..............................#......#..................................#...
......................#.........##.....................................#......................#..#..........#...............#....#
.#......................................................#....#......................................#...............#....#........
............#...............................#.......................................................#.............................
.............................................................................#....................................................
..#...#.....#...............................................................................................#.....................
................................................#.#.......................#..................#............#.......................
...............#.............#.....................#........................................................#..........#.......#..
...................................#..........#......#............................................#.....#.........................
.............#..............#...........##..........................................................................#.....#.......
.............#...............#........#.................................................................#.......#.................
.#...............................................................#..............................................................#.
.#......#...........#..............................................................##.............................................
...................#.....................................#....#........................#............................#.......###...
.....#...#.....#......................#.....................................#...............................#.....................
......................#....#...#........#........#...........................#...............#...........................#....#...
..#..#................................................................................#...........................................
.....#......#.#.......................................#..........#................................................................
..........#.......................#.............#.#........##.........................................................#...........
##........##.#....................#...#...................................................#.##......#...................#.........
...........#................#.#...........#......................#..................#......#......................................
...#..............................#......#...............#.................#.#............................................#.....#.
...#..................#...............#.........#..#.............................#..........#...................#.......#.........
.....................................................................................................#.......................#....
....................................##.#.................................#......##................................#.#.............
..................#.............................................................................................#............#....
............#........#...#.....#.....#........................................#....#..............#..............................#
....................................#...........................................................................................#.
............................#.#....#.....................#........................................................................
........#....#......#.......#................................................................##............................#......
....#...................#....#.............................................................................................#......
....................#......#.........................#..................#.........#....................#..........................
#........#.....#.......#....................................#.....#...........................................#...................
.....#....................................................................................................#.#....#................
....#....................................................................#.......#........................................#.......
#...........................#.#....#......#................................................................................#......
.#..........................................................#...............#......................#.............................#
..#..#.#...................................#.......#...............#....#....................#................................#...
.........................#........................................................................................................
...................................#...........................#...........#..#...........#................#.........#............
......................................#...............#.................#..#............................#.....#..#...#............
#.......................#.........#..#...............................................................#.......................#....
............#............................#..#.....................................................................................
................#............#..................#....#........#...............................#....#.#.......................#.#..
.........................................................................#....................#..........................#........
.....................................................#...............#........................................#......#............
..........##..................##...............................................................................................#..
..................#.........................................#..#......................#.........#.....#.....#.....................
..#.........................................................................#...................................#................#
...............................#..................................................................................................
..#..........#..#..............................................................................#........................#.........
...........#.#........................................................#.....#.........................#...........................
...........................................#......#...............................................................................
.......................#................................................................................................##........
.....#...............#....................................................................................#.......#...............
.#.#.................................#........................#................#...............#......#...........................
........#........#...............#.........................^...........................#......#.................................#.
.....................#.............#..#...........................................................................................
...........#...........................................................................#.......##......#.............#............
..........#..........................................#.................#....#......##.........#.................................#.
...................#...#...................#....#...........#................................#.#..................................
.......#....#...#..................#...............................................#.....#.........#......#.#.#.......#......#....
.....#................................................#......................#...#.....................................#.#........
.##........##.......#.........................................##..................................................................
......................................#....#........#..........#..#...........................#....................#....#.........
.......................#........................#..............................#.#.............................................#..
..........................#....###......................................................................#...................#.....
...........#..................#..............#....................................................................................
......................#................#..#............................#............#.........................##...#..............
.................#.......................................................................#....#...............................#...
................................................#..............................................................................#..
..#.......#....#................#...........................#..........#.#..#.......................#.#....................#......
........#.............................#........................................#..................................................
...........................#............................................................................#.............#....#......
#...................#.......#............#..........................................................#..#....#......#..........#..#
#..........#.................................#.........................#..................................#....................##.
..........#..#...........................................................................#........................##..........#...
.............#.#.......................................#.................................#..............#.......#.................
.................#....#........#........#....#.................................#................................#.................
...........................#..........#.#..#..#........#...#....................#...#........#.......................#............
........#................................#...................................#.#...............#..................................
............................................................#.......#......#.#..........................#..#....................#.
.........#.#....................................#.....................#.....##.......#..................................#.........
........#......................................#.......##............................................................##.....#.....
.............#................................#....#..................##...........................#..#..#........................
.......................................................#...#..........#...................................#.......#........#......
.....#...........#...............................................................................................#................
.......#..................#......#.....#............#..................#.......#.............#................#...................
.....#.........................................................#...........................................#.............#.....#..
...............#..................#...............................................#...................#...........................
..#............#......#....#...#..............................#..#...................................#...#.............#..........
.........#........#.....................................##.......................#.....................#..#.............#.........
....................#....#......................#..#.##..................#................#...........#............#..............
..........#..................................#............#..#...............#.................#..........#.......................
..................#.........#........................#.........................#.........#..................................#.....
...........#.#..............#........#.................................#............#............................#................
.#.....#........................................................................................#....#........##..................
.....................#....#.................#..........#............#............................#.............#.............#.#..
................................#....#......................................................#....#............#.............#.....
..............#..#.........#....................#.......................#.......#.........#..................#....................
.............#.....#....................#.#.....................#................#...#.........................#........##........
.......#.......................#.........................................#.........................##.....#...........#...#.....#.
.....#.................#................................................................#.................................#....#..
................#.......................#...........#........#................#.......#.#.#........................#........#.....
......#..........................#......#............#.......#...#.............................#..........##.......#..........#...
................#.....#...#..............................#......#..#..............................................................
.............................#....#...............#..............#......................................#.......###..#.#..........
..........#.......#...............#............................#........#.........................................................
.................#.....................................#.......................................#................#........#.#..#..."""

input2 = """....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#..."""

pointers = ["^", ">", "v", "<"];
location = [0, 0]
rows = list(input.splitlines())
counter = 0;
pointerIndex = 0;


def getPointer(pointerIndexUsed):
    if pointerIndexUsed == 4:
        global pointerIndex
        pointerIndex = 0
    return pointers[pointerIndex]


indexRow = 0
while indexRow < len(rows):
    row = rows[indexRow]
    if ">" in row:
        foundH = row.index(">")
        foundV = indexRow
        print(rows[indexRow][foundH])
        rows[indexRow] = (rows[indexRow][:foundH] + "x" + rows[indexRow][foundH + 1:])
        while (foundH < (len(rows[indexRow]) - 1)):
            if (rows[foundV][foundH + 1] != "#"):
                if (rows[foundV][foundH + 1] != "x"):
                    counter += 1
            else:
                pointerIndex += 1;
                location = [foundH, foundV]
                rows[foundV] = (rows[foundV][:foundH] + getPointer(pointerIndex) + rows[foundV][foundH + 1:])
                indexRow = 0
                break;
            foundH += 1
        if (foundH >= (len(rows[indexRow]) - 1)):
            print("limit right", counter)
            break;

    if "^" in row:
        foundH = row.index("^")
        foundV = indexRow
        print(rows[indexRow][foundH])
        rows[indexRow] = (rows[indexRow][:foundH] + "x" + rows[indexRow][foundH + 1:])
        while (foundV > 0):
            if (rows[foundV - 1][foundH] != "#"):
                if (rows[foundV][foundH + 1] != "x"):
                    counter += 1
            else:
                pointerIndex += 1;
                location = [foundH, foundV]
                rows[foundV] = (rows[foundV][:foundH] + getPointer(pointerIndex) + rows[foundV][foundH + 1:])
                indexRow = 0
                break;
            foundV -= 1
        if (foundV <= 0):
            print("limit top", counter)
            break;

    if "v" in row:
        foundH = row.index("v")
        foundV = indexRow
        print(rows[indexRow][foundH])
        rows[indexRow] = (rows[indexRow][:foundH] + "x" + rows[indexRow][foundH + 1:])

        while (foundV < (len(rows) - 1)):
            if (rows[foundV + 1][foundH] != "#"):
                if (rows[foundV][foundH + 1] != "x"):
                    counter += 1
            else:
                pointerIndex += 1;
                location = [foundH, foundV]
                rows[foundV] = (rows[foundV][:foundH] + getPointer(pointerIndex) + rows[foundV][foundH + 1:])
                indexRow = 0
                break;
            foundV += 1
        if (foundV >= (len(rows) - 1)):
            print("limit bottom", counter)
            break;

    if "<" in row:
        foundH = row.index("<")
        foundV = indexRow
        print(rows[indexRow][foundH])
        rows[indexRow] = (rows[indexRow][:foundH] + "x" + rows[indexRow][foundH + 1:])
        while (foundH > 0):
            if (rows[foundV][foundH - 1] != "#"):
                if (rows[foundV][foundH + 1] != "x"):
                    counter += 1
            else:
                pointerIndex += 1;
                location = [foundH, foundV]
                rows[foundV] = (rows[foundV][:foundH] + getPointer(pointerIndex) + rows[foundV][foundH + 1:])
                indexRow = 0
                break;
            foundH -= 1
        if (foundH <= 0):
            print("limit left", counter)
            break;

    indexRow += 1;

print(rows)
print(pointers[pointerIndex]);
print(counter)
#5404
#1984
